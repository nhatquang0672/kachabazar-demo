(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{2576:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/forget-password/[token]",function(){return t(5611)}])},1691:function(e,r,t){"use strict";var s=t(5893);t(7294);r.Z=function(e){var r=e.errorName;return(0,s.jsx)(s.Fragment,{children:r&&(0,s.jsx)("span",{className:"text-red-400 text-sm mt-2",children:r.message})})}},97:function(e,r,t){"use strict";var s=t(6042),n=t(9396),o=t(5893),a=(t(7294),t(1473));r.Z=function(e){var r=e.register,t=e.defaultValue,i=e.name,c=e.label,u=e.type,l=e.placeholder,d=e.Icon;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{label:c}),(0,o.jsxs)("div",{className:"relative",children:[d&&(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,o.jsxs)("span",{className:"text-gray-800 focus-within:text-gray-900 sm:text-base",children:[(0,o.jsx)(d,{})," "]})}),(0,o.jsx)("input",(0,n.Z)((0,s.Z)({},r("".concat(i),{required:"".concat(c," is required!")})),{defaultValue:t,type:u,placeholder:l,name:i,className:d?"py-2 pl-10 w-full appearance-none border text-sm opacity-75 text-input rounded-md placeholder-body min-h-12 transition duration-200 focus:ring-0 ease-in-out bg-white border-gray-200 focus:outline-none focus:border-emerald-500 h-11 md:h-12":"py-2 px-4 md:px-5 w-full appearance-none border text-sm opacity-75 text-input rounded-md placeholder-body min-h-12 transition duration-200 focus:ring-0 ease-in-out bg-white border-gray-200 focus:outline-none focus:border-emerald-500 h-11 md:h-12"}))]})]})}},1473:function(e,r,t){"use strict";var s=t(5893);t(7294);r.Z=function(e){var r=e.label;return(0,s.jsx)("label",{className:"block text-gray-500 font-medium text-sm leading-none mb-2",children:r})}},5611:function(e,r,t){"use strict";t.r(r);var s=t(6042),n=t(9396),o=t(5893),a=t(1163),i=t(7294),c=t(1955),u=t(7536),l=t(6893),d=t(782),p=t(1691),m=t(97),f=t(6765),h=t(6896),g=t(8965);r.default=function(){var e=(0,i.useState)(!1),r=e[0],t=e[1],x=(0,i.useState)(!1),w=x[0],y=x[1],b=(0,i.useContext)(h.S).dispatch,v=(0,a.useRouter)(),j=(0,i.useRef)(""),N=(0,u.cI)(),Z=N.register,P=N.handleSubmit,O=N.watch,E=N.setValue,_=N.formState.errors;j.current=O("newPassword");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Ix,{}),(0,o.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-100",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow max-w-md w-full space-y-8 py-12 px-4 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold font-serif",children:w?"Login":"Forget Password"}),(0,o.jsx)("p",{className:"text-sm md:text-base text-gray-500 mt-2 mb-8 sm:mb-10",children:w?"Login with your email and new password":"Reset Your Password"})]}),(0,o.jsx)("form",{onSubmit:P((function(e){var r,s=e.registerEmail,n=e.password,o=e.newPassword;(t(!0),o)&&f.Z.resetPassword({newPassword:o,token:null===(r=v.query)||void 0===r?void 0:r.token}).then((function(e){t(!1),y(!0),(0,g.t5)(e.message),E("newPassword")})).catch((function(e){t(!1),(0,g.cB)(e?e.response.data.message:e.message)}));s&&n&&f.Z.userLogin({registerEmail:s,password:n}).then((function(e){t(!1),v.push("/"),(0,g.t5)("Login Success!"),b({type:"USER_LOGIN",payload:e}),c.Z.set("userInfo",JSON.stringify(e))})).catch((function(e){t(!1),(0,g.cB)(e?e.response.data.message:e.message)}))})),className:"flex flex-col justify-center",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 gap-5",children:[w&&(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)(m.Z,{register:Z,label:"Email",name:"registerEmail",type:"email",placeholder:"Email",Icon:l.Imn}),(0,o.jsx)(p.Z,{errorName:_.registerEmail})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)(m.Z,{register:Z,label:"Password",name:"password",type:"password",placeholder:"Password",Icon:l.UIZ}),(0,o.jsx)(p.Z,{errorName:_.password})]})]}),!w&&(0,o.jsxs)(o.Fragment,{children:[" ",(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("input",(0,n.Z)((0,s.Z)({name:"newPassword",type:"password",placeholder:"New password"},Z("newPassword",{required:"You must specify a password",minLength:{value:8,message:"Password must have at least 8 characters"}})),{className:"py-2 px-4 md:px-5 w-full appearance-none border text-sm opacity-75 text-input rounded-md placeholder-body min-h-12 transition duration-200 focus:ring-0 ease-in-out bg-gray-100 border-gray-200 focus:outline-none focus:border-emerald-500 h-11 md:h-12"})),(0,o.jsx)(p.Z,{errorName:_.newPassword})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("input",(0,n.Z)((0,s.Z)({name:"confirm_password",type:"password",placeholder:"Confirm password"},Z("confirm_password",{validate:function(e){return e===j.current||"The passwords do not match"}})),{className:"py-2 px-4 md:px-5 w-full appearance-none border text-sm opacity-75 text-input rounded-md placeholder-body min-h-12 transition duration-200 focus:ring-0 ease-in-out bg-gray-100 border-gray-200 focus:outline-none focus:border-emerald-500 h-11 md:h-12"})),(0,o.jsx)(p.Z,{errorName:_.confirm_password})]})]}),(0,o.jsx)("button",{disabled:r,type:"submit",className:"w-full text-center py-3 rounded bg-emerald-500 font-medium text-sm text-white hover:bg-emerald-600 transition-all focus:outline-none my-1",children:w?"Login":"Reset Password"})]})})]})})]})}},6765:function(e,r,t){"use strict";var s=t(71),n={userLogin:function(e){return s.Z.post("/user/login",e)},verifyEmailAddress:function(e){return s.Z.post("/user/verify-email",e)},userRegister:function(e,r){return s.Z.post("/user/register/".concat(e),r)},signUpWithProvider:function(e){return s.Z.post("/user/signup",e)},forgetPassword:function(e){return s.Z.put("/user/forget-password",e)},resetPassword:function(e){return s.Z.put("/user/reset-password",e)},changePassword:function(e){return s.Z.post("/user/change-password",e)},updateUser:function(e,r){return s.Z.put("/user/".concat(e),r)}};r.Z=n},71:function(e,r,t){"use strict";var s=t(6042),n=t(9396),o=t(9669),a=t.n(o),i=t(1955),c=a().create({baseURL:"".concat("http://43.207.196.87:5055/api"),timeout:5e5,headers:{Accept:"application/json","Content-Type":"application/json"}});c.interceptors.request.use((function(e){var r;return i.Z.get("userInfo")&&(r=JSON.parse(i.Z.get("userInfo"))),(0,n.Z)((0,s.Z)({},e),{headers:{authorization:r?"Bearer ".concat(r.token):null}})}));var u=function(e){return e.data},l={get:function(e,r){return c.get(e,r).then(u)},post:function(e,r,t){return c.post(e,r,t).then(u)},put:function(e,r){return c.put(e,r).then(u)}};r.Z=l},8965:function(e,r,t){"use strict";t.d(r,{cB:function(){return o},t5:function(){return n}});t(5893);var s=t(782),n=(t(993),function(e){return s.Am.success(e,{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),o=function(e){return s.Am.error(e,{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};s.Ix},8357:function(e,r,t){"use strict";t.d(r,{w_:function(){return u}});var s=t(7294),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=s.createContext&&s.createContext(n),a=function(){return a=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},a.apply(this,arguments)},i=function(e,r){var t={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)r.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(t[s[n]]=e[s[n]])}return t};function c(e){return e&&e.map((function(e,r){return s.createElement(e.tag,a({key:r},e.attr),c(e.child))}))}function u(e){return function(r){return s.createElement(l,a({attr:a({},e.attr)},r),c(e.child))}}function l(e){var r=function(r){var t,n=e.attr,o=e.size,c=e.title,u=i(e,["attr","size","title"]),l=o||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),s.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,u,{className:t,style:a(a({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==o?s.createElement(o.Consumer,null,(function(e){return r(e)})):r(n)}}},function(e){e.O(0,[530,275,774,888,179],(function(){return r=2576,e(e.s=r);var r}));var r=e.O();_N_E=r}]);