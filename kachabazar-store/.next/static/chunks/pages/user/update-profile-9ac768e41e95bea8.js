(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[994],{7583:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/update-profile",function(){return r(8637)}])},8637:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return Z}});var a=r(5893),t=r(5152),n=r.n(t),l=r(1955),i=r(7536),d=r(7294),o=r(1473),c=r(1691),m=r(6963),u=r(97),p=r(6765),x=r(6896),f=r(6042),h=r(9396),g=r(9669),j=r.n(g),v=r(2512),N=r(6893),b=function(e){var s=e.setImageUrl,r=e.imageUrl,t=(0,d.useState)([]),n=t[0],l=t[1],i=(0,v.uI)({accept:"image/*",multiple:!1,maxSize:1e5,onDrop:function(e){l(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}}),o=i.getRootProps,c=i.getInputProps,m=n.map((function(e){return(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:"inline-flex border-2 border-gray-100 w-24 max-h-24",src:e.preview,alt:e.name})})},e.name)}));return(0,d.useEffect)((function(){n&&n.forEach((function(e){var r=new FormData;r.append("file",e),r.append("upload_preset","dfafsd  //use here your unsigned upload preset"),j()({url:"https://api.cloudinary.com/v1_1/your-Cloud-Name/image/upload",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:r}).then((function(e){s(e.data.secure_url)})).catch((function(e){return console.log(e)}))}))}),[n]),(0,d.useEffect)((function(){return function(){n.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[n]),(0,a.jsxs)("div",{className:"w-full text-center",children:[(0,a.jsxs)("div",(0,h.Z)((0,f.Z)({className:"px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer"},o()),{children:[(0,a.jsx)("input",(0,f.Z)({},c())),(0,a.jsx)("span",{className:"mx-auto flex justify-center",children:(0,a.jsx)(N.Re4,{className:"text-3xl text-emerald-500"})}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Drag your image here"}),(0,a.jsx)("em",{className:"text-xs text-gray-400",children:"(Only *.jpeg and *.png images will be accepted)"})]})),(0,a.jsx)("aside",{className:"flex flex-row flex-wrap mt-4",children:r?(0,a.jsx)("img",{className:"inline-flex border rounded-md border-gray-100 w-24 max-h-24 p-2",src:r,alt:"product"}):m})]})},w=r(8965),y=function(){var e=(0,d.useState)(""),s=e[0],r=e[1],t=(0,d.useState)(!1),n=t[0],f=t[1],h=(0,d.useContext)(x.S).state.userInfo,g=(0,i.cI)(),j=g.register,v=g.handleSubmit,N=g.setValue,y=g.formState.errors;return(0,d.useEffect)((function(){if(l.Z.get("userInfo")){var e=JSON.parse(l.Z.get("userInfo"));N("name",e.name),N("email",e.email),N("address",e.address),N("phone",e.phone),r(e.image)}}),[]),(0,a.jsx)(m.default,{title:"Update-Profile",description:"This is edit profile page",children:(0,a.jsxs)("div",{className:"max-w-screen-2xl",children:[(0,a.jsx)("div",{className:"md:grid md:grid-cols-3 md:gap-6",children:(0,a.jsx)("div",{className:"md:col-span-1",children:(0,a.jsx)("div",{className:"px-4 sm:px-0",children:(0,a.jsx)("h2",{className:"text-xl font-serif font-semibold mb-5",children:"Update Profile"})})})}),(0,a.jsx)("form",{onSubmit:v((function(e){if(s){f(!0);var r={name:e.name,email:e.email,address:e.address,phone:e.phone,image:s};p.Z.updateUser(h._id,r).then((function(e){e&&(f(!1),(0,w.t5)("Profile Update Successfully!"),l.Z.set("userInfo",JSON.stringify(e)))})).catch((function(e){var s,r;f(!1),(0,w.cB)(e?null===e||void 0===e||null===(s=e.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message:e.message)}))}else(0,w.cB)("Image is required!")})),children:(0,a.jsxs)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:[(0,a.jsx)("div",{className:"bg-white space-y-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{label:"Photo"}),(0,a.jsx)("div",{className:"mt-1 flex items-center",children:(0,a.jsx)(b,{imageUrl:s,setImageUrl:r})})]})}),(0,a.jsx)("div",{className:"mt-10 sm:mt-0",children:(0,a.jsx)("div",{className:"md:grid-cols-6 md:gap-6",children:(0,a.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:(0,a.jsxs)("div",{className:"lg:mt-6 mt-4 bg-white",children:[(0,a.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(u.Z,{register:j,label:"Full Name",name:"name",type:"text",placeholder:"Full Name"}),(0,a.jsx)(c.Z,{errorName:y.name})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(u.Z,{register:j,label:"Your Address",name:"address",type:"text",placeholder:"Your Address"}),(0,a.jsx)(c.Z,{errorName:y.address})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(u.Z,{register:j,label:"Phone/Mobile",name:"phone",type:"tel",placeholder:"Your Mobile Number"}),(0,a.jsx)(c.Z,{errorName:y.phone})]}),(0,a.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[(0,a.jsx)(u.Z,{register:j,label:"Email Address",name:"email",type:"email",placeholder:"Your Email"}),(0,a.jsx)(c.Z,{errorName:y.email})]})]}),(0,a.jsx)("div",{className:"col-span-6 sm:col-span-3 mt-5 text-right",children:(0,a.jsx)("button",{disabled:n,type:"submit",className:"md:text-sm leading-5 inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-medium text-center justify-center border-0 border-transparent rounded-md placeholder-white focus-visible:outline-none focus:outline-none bg-emerald-500 text-white px-5 md:px-6 lg:px-8 py-2 md:py-3 lg:py-3 hover:text-white hover:bg-emerald-600 h-12 mt-1 text-sm lg:text-sm w-full sm:w-auto",children:"Update Profile"})})]})})})})]})})]})})},Z=n()((function(){return Promise.resolve(y)}),{ssr:!1})}},function(e){e.O(0,[260,609,556,230,530,275,61,68,421,512,388,963,774,888,179],(function(){return s=7583,e(e.s=s);var s}));var s=e.O();_N_E=s}]);